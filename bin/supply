#!/usr/bin/env bash
 
set -euo pipefail 

# https://docs.cloudfoundry.org/buildpacks/understand-buildpacks.html
BUILD_DIR="${1}"
CACHE_DIR="${2}"
DEPS_DIR="${3}"
DEPS_IDX="${4}"

BUILDPACK_DIR=$(dirname $(readlink -f ${BASH_SOURCE%/*}))
#source ${BUILDPACK_DIR}/parameters.sh

if [ -f "${CACHE_DIR}"/"quarto-1.5.53-linux-arm64.tar.gz" ]
then
    echo "-----> Using Quarto from cache"
else
    echo "-----> Downloading Quarto"

    #https://github.com/quarto-dev/quarto-cli/releases/download/v1.5.53/quarto-1.5.53-linux-amd64.deb    # curl -fsSLO "${QUARTO_URL}"
    # curl -sLO https://github.com/quarto-dev/quarto-cli/releases/download/v1.5.53/quarto-1.5.53-linux-amd64.deb
    curl -fsSLO https://github.com/quarto-dev/quarto-cli/releases/download/v1.5.53/quarto-1.5.53-linux-arm64.tar.gz

    mv "quarto-1.5.53-linux-arm64.tar.gz" "${CACHE_DIR}/quarto-1.5.53-linux-arm64.tar.gz"

    # echo "-----> Extracting"
    # tar -xvzf ./quarto-1.5.53-linux-arm64.tar.gz

    # echo "-----> Extracting"

    # echo "-----> Installing Quarto"
	#sudo dpkg -i quarto-1.5.53-linux-amd64.deb

fi