#!/usr/bin/env bash
 
set -euo pipefail 

# https://docs.cloudfoundry.org/buildpacks/understand-buildpacks.html
BUILD_DIR="${1}"
CACHE_DIR="${2}"
DEPS_DIR="${3}"
DEPS_IDX="${4}"

BUILDPACK_DIR=$(dirname $(readlink -f ${BASH_SOURCE%/*}))
#source ${BUILDPACK_DIR}/parameters.sh

if [ -f "${CACHE_DIR}"/"quarto-1.5.53-linux-amd64.deb" ]
then
    echo "-----> Using Quarto from cache"
else
    echo "-----> Downloading Quarto"
    #https://github.com/quarto-dev/quarto-cli/releases/download/v1.5.53/quarto-1.5.53-linux-amd64.deb
    # curl -fsSLO "${QUARTO_URL}"
    curl -sLO https://github.com/quarto-dev/quarto-cli/releases/download/v1.5.53/quarto-1.5.53-linux-amd64.deb

    # mv "${SUPERCRONIC_FILE}" "${CACHE_DIR}/${SUPERCRONIC_FILE}"
    #mv "quarto-1.5.53-linux-amd64.deb" "${CACHE_DIR}/quarto-1.5.53-linux-amd64.deb"
    echo "-----> Installing Quarto"
    # execute the installation
	#sudo dpkg -i quarto-1.5.53-linux-amd64.deb
    apt install ./quarto-1.5.53-linux-amd64.deb
fi